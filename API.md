<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [put-item](#put-item)
-   [null/null](#nullnull)
-   [get](#get)
-   [get](#get-1)
-   [get](#get-2)
-   [get](#get-3)
-   [get](#get-4)
-   [put](#put)
-   [put](#put-1)
-   [update-stats](#update-stats)

## put-item

handle all the logic and some validation for item creation and updating

**Parameters**

-   `opts` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the opts for the action
    -   `opts.task` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the id of the task the item belongs to
    -   `opts.item` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the id of the item itself
    -   `opts.user` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the user making the change
    -   `opts.featureCollection` **FeatureCollection?** a validated GeoJSON feature collection, required on create
    -   `opts.pin` **Point?** a validated GeoJSON point representing the queryable location of this item, required on create
    -   `opts.instructions` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** the instructions for what needs to be done, required on create
    -   `opts.status` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** the status to set the item to
    -   `opts.lockedTill` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** the time the lock expires at

## null/null

Get the status of server

**Examples**

```javascript
curl https://host/tasks/task-name
 { status: 'OK' }
```

## get

Get a list of tasks

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.task` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the task id

**Examples**

```javascript
curl https://host/tasks/task-name
 [{
   id: 'one',
   metadata: {}
 }]
```

## get

Get a task

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.task` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the task id

**Examples**

```javascript
curl https://host/tasks/task-name
 {
   id: 'one',
   metadata: {}
 }
```

## get

Get stats for a task

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.task` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the task id

**Examples**

```javascript
curl https://host/tasks/task-name/stats
[
  {
    id: 'one',
    stats: {
      userone: {
        '2017-09-27': {
          fixed: 0,
          noterror: 1,
          inprogress: 1,
          completed: 1
        }
      }
    }
  }
]
```

## get

Get a list of items for a task

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.task` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the task id
-   `query` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what queryparams are valid
    -   `query.lock` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** if provided this must either be 'unlocked' or 'locked'

**Examples**

```javascript
curl https://host/tasks/task-name/items?lock=unlocked
[
  {
    "id": "item-id",
    "task_id": "task-name",
    "lockedTill": "2017-09-01T00:00:00Z"
  }
]
```

## get

Get an item from a task

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.task` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the task id
    -   `params.item` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the item id

**Examples**

```javascript
curl https://host/tasks/task-name/items/item-id
  {
    "id": "item-id",
    "task_id": "task-name",
    "lockedTill": "2017-09-01T00:00:00Z"
  }
```

## put

Put a task

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.task` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the task id
-   `body` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the body of request
    -   `body.metadata` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** ???

**Examples**

```javascript
curl -X PUT -H "Content-Type: application/json" -d \
 '{ "id": "two", "metadata": {} }' \
  https://host/tasks/task-name
```

## put

Put an item in a task

**Parameters**

-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** what the keys in the url mean
    -   `params.task` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the task id
    -   `params.item` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the item id
-   `body` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the body of the request
    -   `body.lock` **(`"unlocked"` \| `"locked"`)?** lock
    -   `body.pin` **\[Lon, Lat]?** a point to represent the feature
    -   `body.status` **(`"open"` \| `"fixed"` \| `"noterror"`)?** the status of current item
    -   `body.featureCollection` **FeatureCollection?** featureCollection
    -   `body.instructions` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** instructions on how to work on the task

**Examples**

```javascript
curl -X PUT -H "Content-Type: application/json" -d \
'{"lock":"unlocked"}' \
https://host/tasks/task-name/items/item-id
```

## update-stats

updates a tasks stats based on the current and previous user/status pairs

**Parameters**

-   `task` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the id of the task
-   `was` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the status and user before the change
-   `is` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the status and user after the change

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 
